#!/usr/bin/env bash

ADD=(
  "ðŸ”§ Add dotgit sync configuration,.dotgit.yaml"
  "ðŸ“„ Update licenses from DGS template,LICENSE*"
  "ðŸ“ Update README from DGS template,README.md"
  "ðŸ“ Add CODE_OF_CONDUCT from DGS template,CODE_OF_CONDUCT.md"
  "ðŸ“ Add CONTRIBUTING from DGS template,CONTRIBUTING.md"
  "ðŸ“ Add COPYRIGHT from DGS template,COPYRIGHT"
  "ðŸ™ˆ Update gitignore from DGS template,.gitignore"
  "ðŸ”§ Add editorconfig from DGS template,.editorconfig"
  "ðŸ”§ Add cspell configuration from DGS template,.cspell/words.txt cspell.json"
  "ðŸ”§ Add commitlint config from DGS template,.commitlintrc.ts"
  "ðŸ”§ Add markdownlint config from DGS template,.markdownlint.jsonc .markdownlintignore"
  "ðŸ”§ Add semantic release config from DGS template,.release/ releaserc.toml"
  "ðŸ”§ Add terraform-docs config from DGS template,.terraform-docs.yml"
  "ðŸ”¨ Add pre-commit configuration from DGS template,.pre-commit-config.yaml"
  "ðŸ”¨ Add pyproject.toml configuration from DGS template,pyproject.toml"
  "ðŸ”¨ Add ruff.toml configuration from DGS template,ruff.toml"
  "ðŸ‘· Add Gitlab CI from DGS template,.gitlab-ci.yml .gitlab/"
)

ADD_FORCE=(
  "ðŸ”¨ Add devbox config from DGS template,devbox.* .devbox/init_hook/*.sh .devbox/flakes/"
  "ðŸ”¨ Add .envrc from DGS template,.envrc"
)

for commit in "${ADD[@]}"; do
  msg="${commit%,*}"
  files="${commit#*,}"

  # shellcheck disable=2086
  for file in ${files}; do
    git add ${file}
  done

  if ! git commit -m "${msg}" &>/dev/null; then
    git commit -m "${msg}"
  fi
done

for commit in "${ADD_FORCE[@]}"; do
  msg="${commit%,*}"
  files="${commit#*,}"

  # shellcheck disable=2086
  for file in ${files}; do
    git add -f ${file}
  done

  if ! git commit -m "${msg}" &>/dev/null; then
    git commit -m "${msg}"
  fi
done
